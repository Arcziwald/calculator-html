<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">Kalkulator OszczÄ™dnoÅ›ci - Automatyzacja KsiÄ™gowoÅ›ci</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #0073b1;
            --dark-bg: #1a1a1a;
            --accent-cyan: #00d4ff;
            --text-white: #ffffff;
            --text-gray: #cccccc;
            --card-bg: #1e1e1e;
            --border-color: #333;
            --success-green: #00ff88;
            --error-red: #ff4d4d;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark-bg);
            padding: 20px;
        }

        .calc-wrapper {
            max-width: 750px;
            margin: 0 auto;
        }

        .calc-container {
            background: linear-gradient(145deg, #1e1e1e, #252525);
            color: var(--text-white);
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 115, 177, 0.2), 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }

        .calc-header {
            text-align: center;
            margin-bottom: 35px;
            position: relative;
        }

        /* --- Language switcher --- */
        .lang-switch {
            position: absolute;
            top: -32px;
            right: 0;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .lang-btn {
            background: rgba(0, 212, 255, 0.12);
            border: 1px solid rgba(0, 212, 255, 0.35);
            color: var(--accent-cyan);
            padding: 7px 12px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 700;
            font-size: 12px;
            letter-spacing: .5px;
            transition: all .2s ease;
        }

        .lang-btn:hover {
            transform: translateY(-1px);
        }

        .lang-btn.active {
            background: rgba(0, 212, 255, 0.22);
            border-color: rgba(0, 212, 255, 0.7);
            color: #fff;
        }

        .calc-header h2 {
            color: var(--accent-cyan);
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .calc-header p {
            color: var(--text-gray);
            font-size: 15px;
            line-height: 1.5;
        }

        .tasks-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 16px;
            color: var(--accent-cyan);
            margin-bottom: 15px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .task-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .task-item {
            background: rgba(0, 115, 177, 0.1);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .task-item:hover {
            border-color: var(--primary-blue);
            background: rgba(0, 115, 177, 0.15);
        }

        .task-item.active {
            border-color: var(--accent-cyan);
            background: rgba(0, 212, 255, 0.15);
        }

        .task-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .task-icon {
            width: 45px;
            height: 45px;
            background: var(--primary-blue);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .task-item.active .task-icon {
            background: var(--accent-cyan);
            transform: scale(1.1);
        }

        .task-text {
            flex: 1;
        }

        .task-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-white);
        }

        .task-desc {
            font-size: 13px;
            color: var(--text-gray);
        }

        .task-expand-icon {
            font-size: 20px;
            color: var(--accent-cyan);
            transition: transform 0.3s ease;
        }

        .task-item.active .task-expand-icon {
            transform: rotate(180deg);
        }

        .task-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, margin-top 0.4s ease;
            margin-top: 0;
        }

        .task-item.active .task-details {
            max-height: 500px;
            margin-top: 15px;
        }

        .task-inputs {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-cyan);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .input-row:last-child {
            margin-bottom: 0;
        }

        .task-input-group {
            margin-bottom: 12px;
        }

        .task-input-group:last-child {
            margin-bottom: 0;
        }

        .task-input-group label {
            display: block;
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 6px;
        }

        .task-input-group input {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #444;
            background: #111;
            color: white;
            font-size: 15px;
            transition: border 0.3s;
        }

        .task-input-group input:focus {
            border-color: var(--accent-cyan);
            outline: none;
        }

        .task-result {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 6px;
            text-align: center;
            font-size: 13px;
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .input-section {
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group:last-child {
            margin-bottom: 0;
        }

        .input-group label {
            display: block;
            font-size: 13px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #444;
            background: #111;
            color: white;
            font-size: 16px;
            transition: border 0.3s;
        }

        .input-group input:focus {
            border-color: var(--accent-cyan);
            outline: none;
        }

        .error {
            color: var(--error-red);
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }

        .calc-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 20px;
        }

        .calc-btn:hover {
            background: #005a8a;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 115, 177, 0.4);
        }

        .calc-btn:disabled {
            background: #333;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .results-section.show {
            opacity: 1;
            max-height: 1500px;
            margin-top: 30px;
        }

        .results-card {
            background: linear-gradient(135deg, rgba(0, 115, 177, 0.2), rgba(0, 212, 255, 0.2));
            border-left: 4px solid var(--accent-cyan);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .result-box {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .result-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--accent-cyan);
            line-height: 1;
        }

        .result-unit {
            font-size: 14px;
            color: var(--text-gray);
            margin-top: 5px;
        }

        .result-sub {
            font-size: 16px;
            color: var(--text-gray);
            margin: 10px 0;
            text-align: center;
        }

        .result-sub strong {
            color: var(--accent-cyan);
            font-size: 18px;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-label {
            font-size: 13px;
            color: var(--text-gray);
            margin-bottom: 8px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--accent-cyan));
            border-radius: 10px;
            transition: width 0.8s ease;
            width: 0%;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
        }

        .result-highlight {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--success-green);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
        }

        .result-highlight p {
            font-size: 15px;
            color: var(--text-white);
            margin-bottom: 5px;
        }

        .result-highlight strong {
            font-size: 20px;
            color: var(--success-green);
        }

        .efficiency-badge {
            display: inline-block;
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-green);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-top: 10px;
            border: 1px solid var(--success-green);
        }

        .cta-section {
            text-align: center;
            margin-top: 25px;
        }

        .cta-text {
            font-size: 15px;
            color: var(--text-gray);
            margin-bottom: 15px;
            font-style: italic;
        }

        .cta-button {
            display: inline-block;
            padding: 16px 40px;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-cyan));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 212, 255, 0.5);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 15px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 212, 255, 0.95);
            color: #000;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.5);
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }

        @media (max-width: 600px) {
            .calc-container {
                padding: 30px 20px;
            }

            .calc-header h2 {
                font-size: 24px;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .result-value {
                font-size: 28px;
            }

            .task-grid {
                gap: 10px;
            }

            .task-item {
                padding: 12px;
            }

            .cta-button {
                padding: 14px 30px;
                font-size: 14px;
            }

            .input-row {
                grid-template-columns: 1fr;
            }

            .lang-switch {
                top: -18px;
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-section.show .results-card {
            animation: slideIn 0.5s ease;
        }
    </style>
</head>

<body>

    <div class="calc-wrapper">
        <div class="calc-container">

            <!-- Header -->
            <div class="calc-header">

                <!-- Language Switcher -->
                <div class="lang-switch" aria-label="Language switch">
                    <button class="lang-btn" type="button" data-set-lang="en">EN</button>
                    <button class="lang-btn" type="button" data-set-lang="pl">PL</button>
                </div>

                <h2 data-i18n="headerTitle">ðŸ’¡ Ile Czasu i PieniÄ™dzy MoÅ¼esz OdzyskaÄ‡?</h2>
                <p data-i18n="headerSubtitle">SprawdÅº, ile zaoszczÄ™dzisz dziÄ™ki automatyzacji powtarzalnych zadaÅ„ w
                    Twoim biurze</p>
            </div>

            <!-- Tasks Section -->
            <div class="tasks-section">
                <div class="section-title" data-i18n="tasksSectionTitle">ðŸ“‹ Kliknij zadania i wprowadÅº swoje dane</div>

                <div class="task-grid">

                    <!-- Task 1: Przypomnienia -->
                    <div class="task-item" data-task="przypomnienia">
                        <div class="task-header">
                            <div class="task-icon">ðŸ“§</div>
                            <div class="task-text">
                                <div class="task-title" data-i18n="task1Title">Przypomnienia o dokumentach</div>
                                <div class="task-desc" data-i18n="task1Desc">Automatyczne maile o brakujÄ…cych fakturach,
                                    umowach, PIT-ach</div>
                            </div>
                            <div class="task-expand-icon">â–¼</div>
                        </div>

                        <div class="task-details">
                            <div class="task-inputs">
                                <div class="input-row">
                                    <div class="task-input-group">
                                        <label data-i18n="labelClients">Liczba klientÃ³w:</label>
                                        <input type="number" class="task-input" data-field="count"
                                            data-i18n-placeholder="phExample80" placeholder="np. 80" value="80" min="0">
                                    </div>
                                    <div class="task-input-group">
                                        <label data-i18n="labelReminderTime">Czas na przypomnienie (min):</label>
                                        <input type="number" class="task-input" data-field="time"
                                            data-i18n-placeholder="phExample6" placeholder="np. 6" value="6" min="0">
                                    </div>
                                </div>
                                <div class="task-result">
                                    <span data-i18n="monthlyPrefix">MiesiÄ™cznie:</span>
                                    <span class="task-result-value">0</span>
                                    <span data-i18n="minutesShort">min</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task 2: Faktury cykliczne -->
                    <div class="task-item" data-task="faktury">
                        <div class="task-header">
                            <div class="task-icon">ðŸ“„</div>
                            <div class="task-text">
                                <div class="task-title" data-i18n="task2Title">Faktury cykliczne</div>
                                <div class="task-desc" data-i18n="task2Desc">Automatyczne generowanie i wysyÅ‚ka faktur
                                    abonamentowych</div>
                            </div>
                            <div class="task-expand-icon">â–¼</div>
                        </div>

                        <div class="task-details">
                            <div class="task-inputs">
                                <div class="input-row">
                                    <div class="task-input-group">
                                        <label data-i18n="labelInvoicesPerMonth">Liczba faktur/mc:</label>
                                        <input type="number" class="task-input" data-field="count"
                                            data-i18n-placeholder="phExample150" placeholder="np. 150" value="150"
                                            min="0">
                                    </div>
                                    <div class="task-input-group">
                                        <label data-i18n="labelInvoiceTime">Czas na fakturÄ™ (min):</label>
                                        <input type="number" class="task-input" data-field="time"
                                            data-i18n-placeholder="phExample4" placeholder="np. 4" value="4" min="0">
                                    </div>
                                </div>
                                <div class="task-result">
                                    <span data-i18n="monthlyPrefix">MiesiÄ™cznie:</span>
                                    <span class="task-result-value">0</span>
                                    <span data-i18n="minutesShort">min</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task 3: Follow-up pÅ‚atnoÅ›ci -->
                    <div class="task-item" data-task="followup">
                        <div class="task-header">
                            <div class="task-icon">ðŸ’¬</div>
                            <div class="task-text">
                                <div class="task-title" data-i18n="task3Title">Follow-up pÅ‚atnoÅ›ci</div>
                                <div class="task-desc" data-i18n="task3Desc">Przypomnienia o nieopÅ‚aconych fakturach,
                                    eskalacje</div>
                            </div>
                            <div class="task-expand-icon">â–¼</div>
                        </div>

                        <div class="task-details">
                            <div class="task-inputs">
                                <div class="input-row">
                                    <div class="task-input-group">
                                        <label data-i18n="labelFollowupsPerMonth">Liczba follow-upÃ³w/mc:</label>
                                        <input type="number" class="task-input" data-field="count"
                                            data-i18n-placeholder="phExample60" placeholder="np. 60" value="60" min="0">
                                    </div>
                                    <div class="task-input-group">
                                        <label data-i18n="labelFollowupTime">Czas na follow-up (min):</label>
                                        <input type="number" class="task-input" data-field="time"
                                            data-i18n-placeholder="phExample5" placeholder="np. 5" value="5" min="0">
                                    </div>
                                </div>
                                <div class="task-result">
                                    <span data-i18n="monthlyPrefix">MiesiÄ™cznie:</span>
                                    <span class="task-result-value">0</span>
                                    <span data-i18n="minutesShort">min</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Task 4: Monitorowanie terminÃ³w -->
                    <div class="task-item" data-task="podatki">
                        <div class="task-header">
                            <div class="task-icon">ðŸ“Š</div>
                            <div class="task-text">
                                <div class="task-title" data-i18n="task4Title">Monitorowanie terminÃ³w</div>
                                <div class="task-desc" data-i18n="task4Desc">Automatyczne powiadomienia o terminach VAT,
                                    ZUS, JPK</div>
                            </div>
                            <div class="task-expand-icon">â–¼</div>
                        </div>

                        <div class="task-details">
                            <div class="task-inputs">
                                <div class="input-row">
                                    <div class="task-input-group">
                                        <label data-i18n="labelClients">Liczba klientÃ³w:</label>
                                        <input type="number" class="task-input" data-field="count"
                                            data-i18n-placeholder="phExample80" placeholder="np. 80" value="80" min="0">
                                    </div>
                                    <div class="task-input-group">
                                        <label data-i18n="labelMonitoringTime">Czas monitorowania (min):</label>
                                        <input type="number" class="task-input" data-field="time"
                                            data-i18n-placeholder="phExample3" placeholder="np. 3" value="3" min="0">
                                    </div>
                                </div>
                                <div class="task-result">
                                    <span data-i18n="monthlyPrefix">MiesiÄ™cznie:</span>
                                    <span class="task-result-value">0</span>
                                    <span data-i18n="minutesShort">min</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Global Input Section -->
            <div class="input-section">
                <div class="section-title" data-i18n="rateSectionTitle">ðŸ’° Twoja stawka</div>

                <div class="input-group">
                    <label for="stawka" data-i18n="rateLabel">Åšrednia stawka godzinowa pracownika (zÅ‚/h):</label>
                    <input type="number" id="stawka" data-i18n-placeholder="phExample100" placeholder="np. 100"
                        value="100" min="1" step="5">
                    <div class="error" id="err-stawka" data-i18n="rateError">WprowadÅº stawkÄ™ â‰¥ 1 zÅ‚</div>
                </div>

                <button class="calc-btn" onclick="calculateSavings()" data-i18n="calcButton">Oblicz
                    OszczÄ™dnoÅ›ci</button>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="results">
                <div class="results-card">
                    <div class="results-grid">
                        <div class="result-box">
                            <div class="result-label" data-i18n="monthlyLabel">MiesiÄ™cznie</div>
                            <div class="result-value" id="monthly-hours">0</div>
                            <div class="result-unit" data-i18n="hoursUnit">godzin</div>
                        </div>
                        <div class="result-box">
                            <div class="result-label" data-i18n="yearlyLabel">Rocznie</div>
                            <div class="result-value" id="yearly-hours">0</div>
                            <div class="result-unit" data-i18n="hoursUnit">godzin</div>
                        </div>
                    </div>

                    <div class="result-sub">
                        <span data-i18n="financialValuePrefix">WartoÅ›Ä‡ finansowa:</span>
                        <strong id="yearly-money">0 zÅ‚</strong>
                        <span data-i18n="perYearSuffix">rocznie</span>
                        <br>
                        <span data-i18n="equivalentPrefix">To rÃ³wnowartoÅ›Ä‡:</span>
                        <strong id="work-days">0 dni roboczych</strong>
                    </div>

                    <div class="progress-container">
                        <div class="progress-label" data-i18n="automationPotential">PotencjaÅ‚ automatyzacji</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                    </div>

                    <div class="result-highlight">
                        <p data-i18n="highlightLine1">ðŸš€ DziÄ™ki automatyzacji odzyskasz:</p>
                        <p><strong id="monthly-days">0 dni</strong> <span data-i18n="highlightLine2Suffix">miesiÄ™cznie
                                na rozwÃ³j i nowych klientÃ³w!</span></p>
                        <div class="efficiency-badge" data-i18n="badgeText">~90% mniej manualnej pracy</div>
                    </div>
                </div>

                <!-- CTA Section -->
                <div class="cta-section">
                    <p class="cta-text" data-i18n="ctaText">Chcesz zobaczyÄ‡, jak to dziaÅ‚a w praktyce?</p>
                    <a href="#pricing" class="cta-button" onclick="scrollToPricing(event)" data-i18n="ctaButton">Zobacz
                        OfertÄ™</a>
                </div>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="empty-state">
                <div class="empty-state-icon">ðŸ‘†</div>
                <p data-i18n="emptyStateText">Kliknij zadania powyÅ¼ej i wprowadÅº swoje dane,<br>aby zobaczyÄ‡ potencjalne
                    oszczÄ™dnoÅ›ci</p>
            </div>

        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">âœ“ Dane zapisane!</div>

    <script>
        // ===== I18N DICTIONARY =====
        const i18n = {
            pl: {
                pageTitle: "Kalkulator OszczÄ™dnoÅ›ci - Automatyzacja KsiÄ™gowoÅ›ci",
                headerTitle: "ðŸ’¡ Ile Czasu i PieniÄ™dzy MoÅ¼esz OdzyskaÄ‡?",
                headerSubtitle: "SprawdÅº, ile zaoszczÄ™dzisz dziÄ™ki automatyzacji powtarzalnych zadaÅ„ w Twoim biurze",

                tasksSectionTitle: "ðŸ“‹ Kliknij zadania i wprowadÅº swoje dane",
                task1Title: "Przypomnienia o dokumentach",
                task1Desc: "Automatyczne maile o brakujÄ…cych fakturach, umowach, PIT-ach",
                task2Title: "Faktury cykliczne",
                task2Desc: "Automatyczne generowanie i wysyÅ‚ka faktur abonamentowych",
                task3Title: "Follow-up pÅ‚atnoÅ›ci",
                task3Desc: "Przypomnienia o nieopÅ‚aconych fakturach, eskalacje",
                task4Title: "Monitorowanie terminÃ³w",
                task4Desc: "Automatyczne powiadomienia o terminach VAT, ZUS, JPK",

                labelClients: "Liczba klientÃ³w:",
                labelReminderTime: "Czas na przypomnienie (min):",
                labelInvoicesPerMonth: "Liczba faktur/mc:",
                labelInvoiceTime: "Czas na fakturÄ™ (min):",
                labelFollowupsPerMonth: "Liczba follow-upÃ³w/mc:",
                labelFollowupTime: "Czas na follow-up (min):",
                labelMonitoringTime: "Czas monitorowania (min):",

                monthlyPrefix: "MiesiÄ™cznie:",
                minutesShort: "min",

                rateSectionTitle: "ðŸ’° Twoja stawka",
                rateLabel: "Åšrednia stawka godzinowa pracownika (zÅ‚/h):",
                rateError: "WprowadÅº stawkÄ™ â‰¥ 1 zÅ‚",
                calcButton: "Oblicz OszczÄ™dnoÅ›ci",

                monthlyLabel: "MiesiÄ™cznie",
                yearlyLabel: "Rocznie",
                hoursUnit: "godzin",

                financialValuePrefix: "WartoÅ›Ä‡ finansowa:",
                perYearSuffix: "rocznie",
                equivalentPrefix: "To rÃ³wnowartoÅ›Ä‡:",
                automationPotential: "PotencjaÅ‚ automatyzacji",

                highlightLine1: "ðŸš€ DziÄ™ki automatyzacji odzyskasz:",
                highlightLine2Suffix: "miesiÄ™cznie na rozwÃ³j i nowych klientÃ³w!",
                badgeText: "~90% mniej manualnej pracy",

                ctaText: "Chcesz zobaczyÄ‡, jak to dziaÅ‚a w praktyce?",
                ctaButton: "Zobacz OfertÄ™",

                emptyStateText: "Kliknij zadania powyÅ¼ej i wprowadÅº swoje dane,<br>aby zobaczyÄ‡ potencjalne oszczÄ™dnoÅ›ci",

                toastSaved: "âœ“ Obliczenia zapisane!",
                toastLoaded: "Dane zaÅ‚adowane z ostatniej sesji",

                // placeholders
                phExample80: "np. 80",
                phExample6: "np. 6",
                phExample150: "np. 150",
                phExample4: "np. 4",
                phExample60: "np. 60",
                phExample5: "np. 5",
                phExample3: "np. 3",
                phExample100: "np. 100",

                // dynamic units for results
                workDaysSuffix: "dni roboczych",
                monthlyDaysSuffix: "dni"
            },
            en: {
                pageTitle: "Savings Calculator - Accounting Automation",
                headerTitle: "ðŸ’¡ How Much Time and Money Can You Recover?",
                headerSubtitle: "Estimate how much you can save by automating repetitive tasks in your accounting office",

                tasksSectionTitle: "ðŸ“‹ Click a task and enter your numbers",
                task1Title: "Missing documents reminders",
                task1Desc: "Automated emails for missing invoices, agreements, tax documents",
                task2Title: "Recurring invoices",
                task2Desc: "Automatic generation and sending of subscription invoices",
                task3Title: "Payment follow-ups",
                task3Desc: "Reminders for unpaid invoices and escalation steps",
                task4Title: "Deadline monitoring",
                task4Desc: "Automatic reminders for VAT, payroll, reporting deadlines",

                labelClients: "Number of clients:",
                labelReminderTime: "Time per reminder (min):",
                labelInvoicesPerMonth: "Invoices per month:",
                labelInvoiceTime: "Time per invoice (min):",
                labelFollowupsPerMonth: "Follow-ups per month:",
                labelFollowupTime: "Time per follow-up (min):",
                labelMonitoringTime: "Monitoring time (min):",

                monthlyPrefix: "Monthly:",
                minutesShort: "min",

                rateSectionTitle: "ðŸ’° Your rate",
                rateLabel: "Average hourly rate (â‚¬/h):",
                rateError: "Enter a rate â‰¥ 1 â‚¬",
                calcButton: "Calculate savings",

                monthlyLabel: "Monthly",
                yearlyLabel: "Yearly",
                hoursUnit: "hours",

                financialValuePrefix: "Financial value:",
                perYearSuffix: "per year",
                equivalentPrefix: "Equivalent to:",
                automationPotential: "Automation potential",

                highlightLine1: "ðŸš€ With automation you can recover:",
                highlightLine2Suffix: "per month for growth and new clients!",
                badgeText: "~90% less manual work",

                ctaText: "Want to see how it works in practice?",
                ctaButton: "See the offer",

                emptyStateText: "Click tasks above and enter your numbers<br>to see potential savings",

                toastSaved: "âœ“ Calculations saved!",
                toastLoaded: "Data loaded from your last session",

                // placeholders
                phExample80: "e.g. 80",
                phExample6: "e.g. 6",
                phExample150: "e.g. 150",
                phExample4: "e.g. 4",
                phExample60: "e.g. 60",
                phExample5: "e.g. 5",
                phExample3: "e.g. 3",
                phExample100: "e.g. 100",

                // dynamic units for results
                workDaysSuffix: "work days",
                monthlyDaysSuffix: "days"
            }
        };

        const localeCfg = {
            pl: { locale: "pl-PL", currency: "PLN", currencySymbol: "zÅ‚" },
            en: { locale: "en-IE", currency: "EUR", currencySymbol: "â‚¬" }
        };

        let currentLang = localStorage.getItem("lang") || "pl";

        function setLang(lang) {
            currentLang = (lang === "en") ? "en" : "pl";
            localStorage.setItem("lang", currentLang);
            document.documentElement.lang = currentLang;

            // highlight active button
            document.querySelectorAll("[data-set-lang]").forEach(btn => {
                btn.classList.toggle("active", btn.getAttribute("data-set-lang") === currentLang);
            });

            // text nodes
            document.querySelectorAll("[data-i18n]").forEach(el => {
                const key = el.getAttribute("data-i18n");
                const val = i18n[currentLang][key];
                if (typeof val === "string") {
                    // allow <br> in a few places
                    if (val.includes("<br>")) el.innerHTML = val;
                    else el.textContent = val;
                }
            });

            // placeholders
            document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
                const key = el.getAttribute("data-i18n-placeholder");
                const val = i18n[currentLang][key];
                if (typeof val === "string") el.setAttribute("placeholder", val);
            });

            // also update document title (since we used data-i18n there)
            document.title = i18n[currentLang].pageTitle;

            // update error text immediately (in case it's visible)
            const err = document.getElementById("err-stawka");
            if (err) err.textContent = i18n[currentLang].rateError;

            // update results silently if visible
            refreshResultsIfVisible();
        }

        function formatInt(n) {
            return new Intl.NumberFormat(localeCfg[currentLang].locale, { maximumFractionDigits: 0 }).format(n);
        }

        function formatMoney(n) {
            // display currency nicely: "12 345 zÅ‚" / "â‚¬12,345"
            const formatted = new Intl.NumberFormat(localeCfg[currentLang].locale, {
                style: "currency",
                currency: localeCfg[currentLang].currency,
                maximumFractionDigits: 0
            }).format(n);

            // For PL we prefer "12 345 zÅ‚" instead of "12 345,00 zÅ‚" (already 0 decimals) and keep symbol after number by locale.
            return formatted;
        }

        // ====== ORIGINAL CALC LOGIC (with small i18n hooks) ======

        // Elements
        const taskItems = document.querySelectorAll('.task-item');
        const stawkaInput = document.getElementById('stawka');
        const resultsSection = document.getElementById('results');
        const emptyState = document.getElementById('empty-state');
        const toast = document.getElementById('toast');

        // Result elements
        const monthlyHoursEl = document.getElementById('monthly-hours');
        const yearlyHoursEl = document.getElementById('yearly-hours');
        const yearlyMoneyEl = document.getElementById('yearly-money');
        const workDaysEl = document.getElementById('work-days');
        const monthlyDaysEl = document.getElementById('monthly-days');
        const progressFill = document.getElementById('progress-fill');

        // Constants
        const SAVINGS_PERCENT = 0.9; // 90% efficiency
        const MAX_HOURS = 60; // Max hours for progress bar scale

        // Task click handling - toggle expand
        taskItems.forEach(item => {
            item.querySelector('.task-header').addEventListener('click', function () {
                item.classList.toggle('active');
            });

            // Real-time calculation on input change
            const inputs = item.querySelectorAll('.task-input');
            inputs.forEach(input => {
                input.addEventListener('input', function () {
                    updateTaskResult(item);
                });
            });
        });

        // Smooth scroll for CTA
        function scrollToPricing(e) {
            e.preventDefault();
            const pricingSection = document.querySelector('#pricing');
            if (pricingSection) {
                pricingSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Show toast notification
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // Update task result display
        function updateTaskResult(taskItem) {
            const countInput = taskItem.querySelector('[data-field="count"]');
            const timeInput = taskItem.querySelector('[data-field="time"]');
            const resultEl = taskItem.querySelector('.task-result-value');

            if (countInput && timeInput && resultEl) {
                const count = parseFloat(countInput.value) || 0;
                const time = parseFloat(timeInput.value) || 0;
                const total = count * time;

                resultEl.textContent = (total || 0).toFixed(0);
            }
        }

        function refreshResultsIfVisible() {
            if (!resultsSection.classList.contains("show")) return;

            // silent recompute without toast
            calculateSavings({ silent: true });
        }

        // Calculate function (optionally silent)
        function calculateSavings(opts = {}) {
            const silent = !!opts.silent;

            // Validate hourly rate
            const stawka = parseFloat(stawkaInput.value) || 0;
            if (stawka < 1) {
                document.getElementById('err-stawka').style.display = 'block';
                if (!silent) stawkaInput.focus();
                return;
            } else {
                document.getElementById('err-stawka').style.display = 'none';
            }

            // Calculate total time from active tasks
            let totalMonthlyMinutes = 0;
            let selectedCount = 0;
            const tasksData = [];

            taskItems.forEach(item => {
                const isActive = item.classList.contains('active');
                const taskName = item.dataset.task;

                const countInput = item.querySelector('[data-field="count"]');
                const timeInput = item.querySelector('[data-field="time"]');

                const count = parseFloat(countInput.value) || 0;
                const time = parseFloat(timeInput.value) || 0;

                // Save task data
                tasksData.push({
                    name: taskName,
                    active: isActive,
                    count: count,
                    time: time
                });

                // Only count if active
                if (isActive) {
                    selectedCount++;
                    totalMonthlyMinutes += count * time;
                }
            });

            // Show/hide results
            if (selectedCount === 0) {
                resultsSection.classList.remove('show');
                emptyState.style.display = 'block';
                return;
            } else {
                resultsSection.classList.add('show');
                emptyState.style.display = 'none';
            }

            // Calculate savings with 90% efficiency
            const monthlyHoursManual = totalMonthlyMinutes / 60;
            const monthlyHoursSaved = Math.round(monthlyHoursManual * SAVINGS_PERCENT);
            const yearlyHoursSaved = monthlyHoursSaved * 12;

            // IMPORTANT: we treat input "stawka" as currency per hour for current language
            const yearlyMoney = Math.round(yearlyHoursSaved * stawka);

            const workDays = Math.round(yearlyHoursSaved / 8);
            const monthlyDays = Math.round(monthlyHoursSaved / 8);

            // Update DOM (locale-aware formatting)
            monthlyHoursEl.textContent = formatInt(monthlyHoursSaved);
            yearlyHoursEl.textContent = formatInt(yearlyHoursSaved);

            // money
            yearlyMoneyEl.textContent = formatMoney(yearlyMoney);

            // work days with suffix translated
            workDaysEl.textContent = `${formatInt(workDays)} ${i18n[currentLang].workDaysSuffix}`;
            monthlyDaysEl.textContent = `${formatInt(monthlyDays)} ${i18n[currentLang].monthlyDaysSuffix}`;

            // Update progress bar
            const progressPercentage = Math.min((monthlyHoursSaved / MAX_HOURS) * 100, 100);
            progressFill.style.width = progressPercentage + '%';

            // Save to localStorage
            const saveData = { stawka: stawka, tasks: tasksData };
            localStorage.setItem('calcData', JSON.stringify(saveData));

            // Show toast
            if (!silent) showToast(i18n[currentLang].toastSaved);
        }

        // Load saved data from localStorage + init language
        window.onload = () => {
            // bind language buttons
            document.querySelectorAll("[data-set-lang]").forEach(btn => {
                btn.addEventListener("click", () => setLang(btn.getAttribute("data-set-lang")));
            });

            // set language early
            setLang(currentLang);

            // restore calc data
            const saved = localStorage.getItem('calcData');
            if (saved) {
                try {
                    const data = JSON.parse(saved);

                    // Restore stawka
                    if (data.stawka) stawkaInput.value = data.stawka;

                    // Restore tasks
                    if (data.tasks) {
                        data.tasks.forEach(taskData => {
                            const taskItem = document.querySelector(`[data-task="${taskData.name}"]`);
                            if (taskItem) {
                                // Activate task
                                if (taskData.active) taskItem.classList.add('active');

                                // Restore input values
                                const inputs = taskItem.querySelectorAll('.task-input');
                                inputs.forEach(input => {
                                    const field = input.dataset.field;
                                    if (taskData[field] !== undefined) input.value = taskData[field];
                                });

                                // Update task result
                                updateTaskResult(taskItem);
                            }
                        });
                    }

                    showToast(i18n[currentLang].toastLoaded);
                } catch (e) {
                    console.log('Error loading saved data');
                }
            }

            // Initialize task results
            taskItems.forEach(item => updateTaskResult(item));
        };
    </script>

</body>

</html>
